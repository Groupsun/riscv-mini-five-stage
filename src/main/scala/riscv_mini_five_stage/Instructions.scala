/*
* Filename : Instructions.scala
* Date     : 02-01-2019
* Author   : SunnyChen
*
* Instruction object for processor
* 02-01-2019 - implemented 7 basic
* 08-01-2019 - add ALU operations, up to 19 instructions
* 09-01-2019 - add register set instructions and memory instructions, up to 29 instructions
* 10-01-2019 - add conditional branch and jump and link operations, up to 36 instructions
*
* 10-01-2019 - Implemented 38 basic instructions of RV32I, except the OS instructions
* */

package riscv_mini_five_stage

import chisel3._
import chisel3.util.BitPat

object Instructions {
  /* ALU operations */
  // Arithmetic operations
  def ADD   = BitPat("b0000000??????????000?????0110011")
  def SUB   = BitPat("b0100000??????????000?????0110011")
  def AND   = BitPat("b0000000??????????111?????0110011")
  def OR    = BitPat("b0000000??????????110?????0110011")
  def XOR   = BitPat("b0000000??????????100?????0110011")

  def ADDI  = BitPat("b?????????????????000?????0010011")
  def ANDI  = BitPat("b?????????????????111?????0010011")
  def ORI   = BitPat("b?????????????????110?????0010011")
  def XORI  = BitPat("b?????????????????100?????0010011")

  // Shift operations
  def SLL   = BitPat("b0000000??????????001?????0110011")
  def SRL   = BitPat("b0000000??????????101?????0110011")
  def SRA   = BitPat("b0100000??????????101?????0110011")

  def SLLI  = BitPat("b0000000??????????001?????0010011")
  def SRLI  = BitPat("b0000000??????????101?????0010011")
  def SRAI  = BitPat("b0100000??????????101?????0010011")

  // Set register instructions
  def SLT   = BitPat("b0000000??????????010?????0110011")
  def SLTU  = BitPat("b0000000??????????011?????0110011")
  def SLTI  = BitPat("b?????????????????010?????0010011")
  def SLTIU = BitPat("b?????????????????011?????0010011")

  /* Memory instructions */
  // Load instructions
  def LW    = BitPat("b?????????????????010?????0000011")
  def LH    = BitPat("b?????????????????001?????0000011")
  def LB    = BitPat("b?????????????????000?????0000011")
  def LBU   = BitPat("b?????????????????100?????0000011")
  def LHU   = BitPat("b?????????????????101?????0000011")

  // Store instructions
  def SW    = BitPat("b?????????????????010?????0100011")
  def SH    = BitPat("b?????????????????001?????0100011")
  def SB    = BitPat("b?????????????????000?????0100011")

  /* Conditional Branch instructions */
  def BEQ   = BitPat("b?????????????????000?????1100011")
  def BNE   = BitPat("b?????????????????001?????1100011")
  def BLT   = BitPat("b?????????????????100?????1100011")
  def BGE   = BitPat("b?????????????????101?????1100011")
  def BLTU  = BitPat("b?????????????????110?????1100011")
  def BGEU  = BitPat("b?????????????????111?????1100011")

  /* Jump instructions */
  def JAL   = BitPat("b?????????????????????????1101111")
  def JALR  = BitPat("b?????????????????000?????1100111")

  /* AUIPC - rd = PC + {imm, 12b'0} */
  def AUIPC = BitPat("b?????????????????????????0010111")

  /* LUI - rd = {imm, 12b'0} */
  def LUI   = BitPat("b?????????????????????????0110111")

  // NOP - ADDI x0, 0x00(x0)
  def NOP   = BitPat("b00000000000000000000000000010011")

  // CSR instructions
  def CSRRW  = BitPat("b?????????????????001?????1110011")
  def CSRRS  = BitPat("b?????????????????010?????1110011")
  def CSRRC  = BitPat("b?????????????????011?????1110011")
  def CSRRWI = BitPat("b?????????????????101?????1110011")
  def CSRRSI = BitPat("b?????????????????110?????1110011")
  def CSRRCI = BitPat("b?????????????????111?????1110011")
  def MRET   = BitPat("b00110000001000000000000001110011")

  // initial void
  def VOID   = BitPat("b00000000000000000000000000000000")

}